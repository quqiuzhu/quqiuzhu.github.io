webpackJsonp([9,13],{"5qt5":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",[r("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"支付状态"},on:{change:e.search},model:{value:e.params.status,callback:function(t){e.params.status=t},expression:"params.status"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",[r("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"用户ID"},model:{value:e.uid,callback:function(t){e.uid=t},expression:"uid"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}})],1),e._v(" "),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{on:{click:e.fetchOrders}},[r("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.items,"highlight-current-row":""}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{label:"用户",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.owner.name))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"title",label:"标题",width:"120"}}),e._v(" "),r("el-table-column",{attrs:{prop:"price",label:"价格",width:"80"}}),e._v(" "),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.status?"已支付":"未支付"))])]}}])}),e._v(" "),r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"order-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"用户ID"}},[r("span",[e._v(e._s(t.row.owner.id))])]),e._v(" "),r("el-form-item",{attrs:{label:"手机号"}},[r("span",[e._v(e._s(t.row.owner.phone))])]),e._v(" "),r("el-form-item",{attrs:{label:"支付时间"}},[r("span",[e._v(e._s(t.row.pay_time))])])],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:!!t.row.status,size:"small"},on:{click:function(r){e.updatePrice(t.$index,t.row)}}},[e._v("改价")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.params.count,total:e.total,"current-page":e.page},on:{"current-change":e.pageChanged}})],1),e._v(" "),r("el-dialog",{attrs:{title:"更改订单价格","close-on-click-modal":!1},model:{value:e.priceVisible,callback:function(t){e.priceVisible=t},expression:"priceVisible"}},[r("order-price",{attrs:{onAction:e.onPriceUpdate,order:e.editingOrder}})],1)],1)},i=[],n={render:a,staticRenderFns:i};t.a=n},PVac:function(e,t,r){t=e.exports=r("FZ+f")(!0),t.push([e.i,".order-expand{font-size:0}.order-expand label{width:70px;color:#99a9bf}.order-expand .el-form-item{margin-right:0;margin-bottom:0;width:33%}","",{version:3,sources:["/var/jenkins_home/workspace/website/modules/admin/src/views/order/index.vue"],names:[],mappings:"AACA,cACE,WAAa,CACd,AACD,oBACI,WAAY,AACZ,aAAe,CAClB,AACD,4BACI,eAAgB,AAChB,gBAAiB,AACjB,SAAW,CACd",file:"index.vue",sourcesContent:["\n.order-expand {\n  font-size: 0;\n}\n.order-expand label {\n    width: 70px;\n    color: #99a9bf;\n}\n.order-expand .el-form-item {\n    margin-right: 0;\n    margin-bottom: 0;\n    width: 33%;\n}\n"],sourceRoot:""}])},"V7/b":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("tJ8z"),i=r("cREd"),n=r("VU/8"),o=n(a.a,i.a,null,null,null);t.default=o.exports},cREd:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"form",attrs:{model:e.order,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"价格",prop:"price"}},[r("el-input-number",{attrs:{min:1},model:{value:e.order.price,callback:function(t){e.order.price=t},expression:"order.price"}})],1),e._v(" "),r("el-form-item",[r("el-button",{nativeOn:{click:function(t){e.cancel(t)}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){e.submit(t)}}},[e._v("提交")])],1)],1)},i=[],n={render:a,staticRenderFns:i};t.a=n},"e+iX":function(e,t,r){"use strict";function a(e){r("kZNj")}Object.defineProperty(t,"__esModule",{value:!0});var i=r("pnLg"),n=r("5qt5"),o=r("VU/8"),l=a,s=o(i.a,n.a,l,null,null);t.default=s.exports},kZNj:function(e,t,r){var a=r("PVac");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("06e59d73",a,!0)},pnLg:function(e,t,r){"use strict";var a=r("V7/b"),i=r("yEme");t.a={components:{OrderPrice:a.default},data:function(){return{params:{uid:0,status:0,start:0,count:10},options:[{value:0,label:"全部"},{value:1,label:"已支付"}],uid:"",items:[],total:0,page:1,loading:!1,priceVisible:!1,editingOrder:{}}},created:function(){this.fetchOrders()},methods:{fetchOrders:function(){var e=this;this.loading=!0,r.i(i.c)(this.params).then(function(t){e.items=t.list,e.total=t.total,e.loading=!1}).catch(function(){e.loading=!1})},pageChanged:function(e){this.params.start=(e-1)*this.params.count,this.fetchOrders()},updatePrice:function(e,t){this.priceVisible=!0,this.editingOrder={id:t.id,price:t.price}},onPriceUpdate:function(e){this.priceVisible=!1,e&&this.fetchOrders()},search:function(){this.params.start=0,this.params.uid=this.uid,this.fetchOrders()}}}},tJ8z:function(e,t,r){"use strict";var a=r("yEme");t.a={name:"OrderPrice",props:{order:{type:Object,default:function(){return{id:0,price:60}}},onAction:{type:Function,default:null}},data:function(){return{loading:!1}},methods:{cancel:function(){this.$refs.form.resetFields(),this.onAction(!1)},submit:function(){var e=this;this.loading=!0;var t={price:parseInt(100*this.order.price)};r.i(a.b)(this.order.id,t).then(function(t){e.loading=!1,e.$message({message:"修改成功",type:"success"}),e.onAction(!0),e.$refs.form.resetFields()}).catch(function(){e.loading=!1})}}}},yEme:function(e,t,r){"use strict";function a(e,t){return r.i(o.a)({url:"/counter/buy",method:"post",data:{package:e,channel:t}})}function i(e){return r.i(o.a)({url:"/counter/orders",method:"get",params:e})}function n(e,t){return r.i(o.a)({url:"/order/"+e,method:"put",data:t})}t.a=a,t.c=i,t.b=n;var o=r("Vo7i")}});
//# sourceMappingURL=9.eda15a4dddb388fc0a7f.js.map